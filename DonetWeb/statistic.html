<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>基于物理-信息异常融合的智能电网攻击检测系统</title>

    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/justified-nav.css" rel="stylesheet">
    <link rel="stylesheet" href="css/css.css">
    <!-- datetimepicker css -->
    <link rel="stylesheet" href="css/bootstrap-datetimepicker.min.css">


    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="js/ie-emulation-modes-warning.js"></script>

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>
  <!-- jquery -->
    <script src="js/jquery.1.8.2.min.js"></script>


    <!-- Bootstrap swith-->
    <link href="dist/css/bootstrap-switch.css" rel="stylesheet">    
    <script src="dist/js/bootstrap-switch.min.js"></script>
    <!-- highcharts -->
    <script src="assets/highcharts/js/highcharts.js"></script>
    <script src="assets/highcharts/js/modules/exporting.js"></script>


    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container"> <!-- container -->

    <!-- 导航开始 -->
      <div class="masthead">
        <h3 class="text-muted">基于物理信息-异常融合的智能电网攻击检测系统</h3>
        <ul class="nav nav-justified ">
          <li><a href="index.html"><span class="glyphicon glyphicon-home"></span>主页</a></li>
          <li><a href="realtime.html"><span class="glyphicon glyphicon-random"></span>实时曲线</a></li>
          <li><a href="history.html"><span class="glyphicon glyphicon-calendar"></span>历史曲线</a></li>
          <li><a href="table.html"><span class="glyphicon glyphicon-search"></span>多表查询</a></li>
          <li class="active"><a href="statistic.html"><span class="glyphicon glyphicon-stats"></span>统计数据</a></li>
          <li><a href="about.html"><span class="glyphicon glyphicon-user"></span>关于我们</a></li>
        </ul>
      </div>
      <!-- 导航结束 -->

      <div id="bargraph">
        
      </div>
      <div id="piegraph">col-md-6</div>

<!--     <div class="row" id="stasticgraphics">
      <div class="col-md-6" id="bargr aph">
        
      </div>
      <div class="col-md-6" id="piegraph">col-md-6</div>
    </div> -->

 
  
    </div> <!-- /container -->

    <footer class="footer ">
          <p>
            CopyRight 2014-2015 &copy;<b style="color:#333;">Smart Grid Team</b> All Rights Reserved
          </p>
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
  </body>
   

   <script type="text/javascript">
     $(function () {
         $(document).ready(function() {
             Highcharts.setOptions({
                 global: {
                     useUTC: false
                 }
             });
             $.getJSON("HandlerStatistics.ashx", {qusi:"qusi"}, function (data) {            
                 var percentage0=data["division"][0]["count"];
                 var percentage1=data["division"][1]["count"];
                 var percentage2 = data["division"][2]["count"];
                 var datacount=[];
                 datacount = [parseInt(data["categorize_count"][0]["physical"]),
                     parseInt(data["categorize_count"][0]["cyber"]),
                     parseInt(data["categorize_count"][0]["fusion"])];
                 console.log(data["categorize_count"][0]["physical"]);
                 console.log(data["categorize_count"][0]["cyber"]);
                 console.log(data["categorize_count"][0]["fusion"]);
                 var sum = parseInt(percentage0) + parseInt(percentage1) + parseInt(percentage2);
                 percentage0 = percentage0 / sum*100;
                 percentage1 = percentage1 / sum*100;
                 percentage2 = percentage2 / sum * 100;
                // alert(percentage0);
                 var chart1, chart2;
                 // 绘制饼状图
                 chart1 = new Highcharts.Chart({
                     chart: {
                         renderTo: 'piegraph',//装载容器id
                         plotBackgroundColor: null,
                         plotBorderWidth: null,
                         plotShadow: false
                     },
                     title: {
                         text: 'IDS检测到不同报警类型所占比例'
                     },
                     tooltip: {
                         pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                         percentageDecimals: 1 //百分比保留小数
                     },
                     plotOptions: {
                         pie: {
                             allowPointSelect: true, //选中某块区域是否允许分离
                             cursor: 'pointer',
                             dataLabels: {
                                 enabled: true //是否直接呈现数据 也就是外围显示数据与否
                             },
                             showInLegend: true //是否显示图例
                         }
                     },
                     series: [{
                         type: 'pie',
                         name: 'IDS Alerts\' percentage',
                         data: [
                     ['DOS Attack', percentage0],
                     ['Password Modification', percentage1],
                     ['Parameter Modification', percentage2],
                     ['Others', 0]]
                        
                     }]
                 });//结束绘制饼状图


                 // 绘制柱状图
                 chart2 = new Highcharts.Chart({
                     chart: {
                         renderTo: 'bargraph',//装载容器id
                         type: 'column'
                     },
                     title: {
                         text: '不同检测方法报警数量统计'
                     },
                     // subtitle: {
                     //     text: 'Source: Wikipedia.org'
                     // },
                     xAxis: {
                         categories: ['基于物理系统的攻击检测', '基于IDS的攻击检测', '基于物理信息融合的攻击检测'],
                         title: {
                             text: null
                         }
                     },
                     yAxis: {
                         min: 0,
                         title: {
                             text: 'Population (millions)',
                             align: 'high'
                         },
                         labels: {
                             overflow: 'justify'
                         }
                     },
                     // tooltip: {
                     //     valueSuffix: ' millions'
                     // },
                     plotOptions: {
                         bar: {
                             dataLabels: {
                                 enabled: true
                             }
                         }
                     },
                     legend: {
                         // layout: 'vertical',
                         layout: 'horizonal',
                         align: 'right',
                         verticalAlign: 'top',
                         x: -20,
                         y: 50,
                         floating: true,
                         borderWidth: 1,
                         backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor || '#FFFFFF'),
                         shadow: true
                     },
                     credits: {
                         enabled: false
                     },
                     series: [
                     // {
                     //     name: 'Year 1800',
                     //     data: [107, 31, 635, 203, 2]
                     // }, {
                     //     name: 'Year 1900',
                     //     data: [133, 156, 947, 408, 6]
                     // }, 
                     {
                         name: '报警数量',
                         //data: [973, 914, 405]
                         data:datacount
                     }]
                 });
                 // 结束绘制柱状图
                 //})
                 });
  


          }); //<!-- end of $(document).ready(function() -->
          
      });
    </script>
 



</html>
